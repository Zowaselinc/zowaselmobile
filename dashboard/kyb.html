<!DOCTYPE html>
<html lang="en">
    <head>
    <script type="text/javascript"  src="../assets/js/accessauthentication_dashboard.js"></script>
	<!-- Meta -->
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, minimum-scale=1, minimal-ui, viewport-fit=cover">
	<meta name="theme-color" content="#2196f3">
	<meta name="author" content="DexignZone" /> 
    <meta name="keywords" content="" /> 
    <meta name="robots" content="" /> 
	<meta name="description" content="Zowasel"/>
	<meta property="og:title" content="Zowasel" />
	<meta property="og:description" content="Zowasel" />
	<meta property="og:image" content="https://makaanlelo.com/tf_products_007/foodia/xhtml/social-image.png"/>
	<meta name="format-detection" content="telephone=no">
	
    <!-- Favicons Icon -->
	<link rel="shortcut icon" type="image/x-icon" href="../assets/images/favicon.png" />
    
    <!-- Title -->
	<title>Zowasel Mobile</title>
	
	<!-- PWA Version -->
	<!-- <link rel="manifest" href="manifest.json"> -->
    
    <!-- Stylesheets -->
	<link rel="stylesheet" href="../assets/vendor/bootstrap-touchspin/dist/jquery.bootstrap-touchspin.min.css">
    <link rel="stylesheet" href="../assets/vendor/swiper/swiper-bundle.min.css">
    <link rel="stylesheet" type="text/css" href="../assets/css/style.css">
    <link rel="stylesheet" type="text/css" href="../assets/css/style2.css">
    <link rel="stylesheet" type="text/css" href="../bypass.css">
    
    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Lato:wght@100;300;400;700;900&family=Roboto+Slab:wght@100;300;500;600;800&display=swap" rel="stylesheet">
</head>   
<body class="bg-white">
<div class="page-wraper">
    
    <!-- Header -->
    <header class="header">
        <div class="main-bar">
            <div class="container">
                <div class="header-content">
                    <div class="left-content">
                        <a href="wallet.html">
                            <svg width="18" height="18" viewBox="0 0 10 16" fill="none" xmlns="http://www.w3.org/2000/svg">
								<path d="M9.03033 0.46967C9.2966 0.735936 9.3208 1.1526 9.10295 1.44621L9.03033 1.53033L2.561 8L9.03033 14.4697C9.2966 14.7359 9.3208 15.1526 9.10295 15.4462L9.03033 15.5303C8.76406 15.7966 8.3474 15.8208 8.05379 15.6029L7.96967 15.5303L0.96967 8.53033C0.703403 8.26406 0.679197 7.8474 0.897052 7.55379L0.96967 7.46967L7.96967 0.46967C8.26256 0.176777 8.73744 0.176777 9.03033 0.46967Z" fill="#a19fa8"/>
							</svg>
                        </a>
                        <h5 class="mb-0 ms-2">Kyb Verification</h5>
                    </div>
                    <div class="mid-content">
                    </div>
                    <div class="right-content">
                        <button class="btn verificationStatus">Unverified</button>
                    </div>
                </div>
            </div>
        </div>
    </header>
    <!-- Header End -->
    
    <!-- Preloader -->
	<!-- <div id="preloader">
		<div class="spinner"></div>
	</div> -->
    <!-- Preloader end-->
    
	<!-- Sidebar -->
    <div class="sidebar" id="sidebar">
		
    </div>
    <!-- Sidebar End -->
    
   
    <!-- Banner -->
	<!-- <div class="author-notification">
		<div class="container inner-wrapper">
			
				
		</div>
	</div> -->
    <!-- Banner End -->

    
    <!-- Page Content -->
    <div id="main" class="page-content bottom-content ">
       
       <div class="account-box">
           <div class="container">
               <div class="account-area">

                   <!-- <script src="../../assets/js/jquery.js"></script>
                   <script>
                       
                           

                           $('#formimage').submit(function(e){
                          
                               e.preventDefault();
                               console.log(filesToUpload," console.log(filesToUpload);");
                               //Store form Data
                               var formData = new FormData();
                               //Loop through array of file and append form Data
                               for (var i = 0; i < filesToUpload.length; i++) {
                                   var file = filesToUpload[i];
                                   var filename = filesToUpload[i].name;
                                   formData.append("image"+i, file, filename);
                               }

                               // console.log(formData, " formData");

                           })
                   </script> -->
    
                   <!-- ---------------------------- FORM SLIDE 1 ----------------------------- -->
                   <form class="form" id="formpage">

                       <p aria-hidden="true" id="required-description">
                           <span class="required"><strong>*</strong></span> Required field
                       </p>

                       <!-- FORM 1 -->
                       <div class="form">
                           <div class="upload__box">
                               <div class="w-100 mb-3">
                                   <label for="exampleInputEmail1" class="form-label mb-0">Product image (maximum of 4) <span class="required">*</span></label>
                                   <div class="upload__btn-box">
                                   <label class="upload__btn">
                                       <p style="margin:0px;padding-top:11px;color:#7e7e7e;" class="fw-bold">Upload images +</p>
                                       <input type="file" multiple="" id="cropimages" data-max_length="3" class="upload__inputfile" required accept="image/png, image/jpg, image/jpeg">
                                   </label>
                                   </div>
                                   <div class="upload__img-wrap"></div>
                               </div>
                           </div>
                           <div class="w-100 mb-3">
                               <label for="formGroupExampleInput" class="form-label mb-0">Enter video URL <span>(Optional)</span></label>
                               <input type="text" id="videourl" class="form-control" placeholder="https://www.videolink.com" />
                           </div>
                           <div class="w-100 mb-3">
                               <label for="exampleInputEmail1" class="form-label mb-0">Zip code/postal <span>(Optional)</span></label>
                               <input type="number" id="zipcode" class="form-control" placeholder="Type your answer" />
                           </div>
                           <!-- <div class="w-100 mb-3">
                               <label for="formGroupExampleInput" class="form-label mb-0">Delivery Address <span class="required">*</span></label>
                               <input type="text" id="deliveryaddress" class="form-control" placeholder="" />
                           </div> -->
                       </div>
                       
                       <div id="form_slide2_response"></div>
                       
                       <div class="input-group d-flex justify-content-between">
                           <button type="button" class="btn mt-2 w-50 btn-rounded" style="background:#f3f3f3;" onclick="gotoFormSlide1()">Prev</button>
                           <button type="submit" class="btn mt-2 btn-success w-50 btn-rounded">Next</button>
                       </div>

                   </form>
                   <!-- ---------------------------- FORM SLIDE 2 ----------------------------- -->



                   <!-- ---------------------------- FORM SLIDE 3 ----------------------------- -->
                   <form class="form" id="formpage3" style="display:none;">

                       <p aria-hidden="true" id="required-description">
                           <span class="required"><strong>*</strong></span> Required field
                       </p>

                       <!-- FORM 3A -->
                       <div class="crop_details mb-3 mt-2">Crop Specification</div>
                       <div class="w-100 mb-3">
                           <label for="formGroupExampleInput" class="form-label mb-0">Broken grains <span class="required">*</span></label>
                           <select class="form-select ponetohundredpercent" id="brokengrains" aria-label="Default select example" required="">
                               
                           </select>
                       </div>
                       <div class="w-100 mb-3">
                           <label for="formGroupExampleInput" class="form-label mb-0">Weevil <span class="required">*</span></label>
                           <select class="form-select ponetohundredpercent" id="weevil" aria-label="Default select example" required="">
                               
                           </select>
                       </div>
                       <div class="w-100 mb-3">
                           <label for="formGroupExampleInput" class="form-label mb-0">Hardness <span class="required">*</span></label>
                           <select class="form-select ponetohundredpercent" id="hardness" aria-label="Default select example" required="">
                               
                           </select>
                       </div>
                       <div class="w-100 mb-3">
                           <label for="exampleInputEmail1" class="form-label mb-0">Oil Content <span class="required">*</span></label>
                           <select class="form-select ponetohundredpercent" id="oilcontent" aria-label="Default select example" required="">
                               
                           </select>
                       </div>
                       <div class="w-100 mb-3">
                           <label for="exampleInputEmail1" class="form-label mb-0">Grain Size <span class="required">*</span></label>
                           <select class="form-select ponetohundredpercent" id="grainsize" aria-label="Default select example" required="">
                               
                           </select>
                       </div>
                       <div class="w-100 mb-3">
                           <label for="exampleInputEmail1" class="form-label mb-0">Ash Content <span class="required">*</span></label>
                           <select class="form-select ponetohundredpercent" id="ashcontent" aria-label="Default select example" required="">
                               
                           </select>
                       </div>
                       <div class="w-100 mb-3">
                           <label for="exampleInputEmail1" class="form-label mb-0">Volatile <span class="required">*</span></label>
                           <select class="form-select ponetohundredpercent" id="volatile" aria-label="Default select example" required="">
                               
                           </select>
                       </div>
                       <div class="w-100 mb-3">
                           <label for="exampleInputEmail1" class="form-label mb-0">Drying Process <span class="required">*</span></label>
                           <select class="form-select ponetohundredpercent" id="dryingprocess" aria-label="Default select example" required="">
                               
                           </select>
                       </div>
                       <div class="w-100 mb-3">
                           <label for="exampleInputEmail1" class="form-label mb-0">Curcumin Content <span class="required">*</span></label>
                           <select class="form-select ponetohundredpercent" id="curcumincontent" aria-label="Default select example" required="">
                               
                           </select>
                       </div>
                       <div class="w-100 mb-3">
                           <label for="exampleInputEmail1" class="form-label mb-0">Total defects <span class="required">*</span></label>
                           <select class="form-select ponetohundredpercent" id="total_defects" aria-label="Default select example" required="">
                               
                           </select>
                       </div>
                       <div class="w-100 mb-3">
                           <label for="exampleInputEmail1" class="form-label mb-0">Dockage <span class="required">*</span></label>
                           <select class="form-select ponetohundredpercent" id="dockage" aria-label="Default select example" required="">
                               
                           </select>
                       </div>
                       <div class="w-100 mb-3">
                           <label for="exampleInputEmail1" class="form-label mb-0">Moisture <span class="required">*</span></label>
                           <select class="form-select ponetohundredpercent" id="moisture" aria-label="Default select example" required="">
                               
                           </select>
                       </div>
                       <div class="w-100 mb-3">
                           <label for="exampleInputEmail1" class="form-label mb-0">Rotten/Shriveled <span class="required">*</span></label>
                           <select class="form-select ponetohundredpercent" id="rotten_shriveled" aria-label="Default select example" required="">
                               
                           </select>
                       </div>
                       <div class="w-100 mb-3">
                           <label for="exampleInputEmail1" class="form-label mb-0">Damaged kernel(DK) <span class="required">*</span></label>
                           <select class="form-select ponetohundredpercent" id="damagedkernel" aria-label="Default select example" required="">
                               
                           </select>
                       </div>
                       <div class="w-100 mb-3">
                           <label for="exampleInputEmail1" class="form-label mb-0">Splits <span class="required">*</span></label>
                           <select class="form-select ponetohundredpercent" id="splits" aria-label="Default select example" required="">
                               
                           </select>
                       </div>
                       <div class="w-100 mb-3">
                           <label for="exampleInputEmail1" class="form-label mb-0">Infestation <span class="required">*</span></label>
                           <select class="form-select ponetohundredpercent" id="infestation" aria-label="Default select example" required="">
                               
                           </select>
                       </div>
                       <div class="w-100 mb-3">
                           <label for="exampleInputEmail1" class="form-label mb-0">Hectolter Teat Weight <span class="required">*</span></label>
                           <select class="form-select ponetohundredpercent" id="hectolter_teat_weight" aria-label="Default select example" required="">
                               
                           </select>
                       </div>
                       <div class="w-100 mb-3">
                           <label for="exampleInputEmail1" class="form-label mb-0">Acid Insoluable Ash <span class="required">*</span></label>
                           <select class="form-select ponetohundredpercent" id="acid_insoluable_ash" aria-label="Default select example" required="">
                               
                           </select>
                       </div>
                       <div class="w-100 mb-3">
                           <label for="exampleInputEmail1" class="form-label mb-0">Mold % By Weight <span class="required">*</span></label>
                           <select class="form-select ponetohundredpercent" id="moldbyweight" aria-label="Default select example" required="">
                               
                           </select>
                       </div>
                       <div class="w-100 mb-3">
                           <label for="exampleInputEmail1" class="form-label mb-0">Whole Dead Insects <span class="required">*</span></label>
                           <select class="form-select ponetohundredpercent" id="wholedeadinsects" aria-label="Default select example" required="">
                               
                           </select>
                       </div>
                       <div class="w-100 mb-3">
                           <label for="exampleInputEmail1" class="form-label mb-0">Insect Defiled/Infested, By Weight <span class="required">*</span></label>
                           <select class="form-select ponetohundredpercent" id="insect_defiled_infested" aria-label="Default select example" required="">
                               
                           </select>
                       </div>
                       <div class="w-100 mb-3">
                           <label for="exampleInputEmail1" class="form-label mb-0">Extraneous, % By Weight <span class="required">*</span></label>
                           <select class="form-select ponetohundredpercent" id="extaneous" aria-label="Default select example" required="">
                               
                           </select>
                       </div>
                       <div class="w-100 mb-3">
                           <label for="exampleInputEmail1" class="form-label mb-0">Mammalian <span class="required">*</span></label>
                           <select class="form-select ponetohundredpercent" id="mammalian" aria-label="Default select example" required="">
                               
                           </select>
                       </div>
                       <!-- FORM 3A -->

                       
                       
                       <div id="form_slide3_response"></div>
                       
                       <div class="input-group d-flex justify-content-between">
                           <button type="button" class="btn mt-2 w-50 btn-rounded" style="background:#f3f3f3;" onclick="gotoFormSlide2()">Back</button>
                           <button type="submit" class="btn mt-2 btn-success w-50 btn-rounded">Save</button>
                           <!-- <button type="submit" class="btn mt-2 btn-success w-50 btn-rounded" onclick="submitAddCropForm()">Save</button> -->
                       </div>

                   </form>
                   <!-- ---------------------------- FORM SLIDE 3 ----------------------------- -->


               </div>
           </div>
       </div>
   </div>
   <!-- Page Content End-->



    <!-- ------------------------------- LOADER -------------------------------- -->
    <div class="loader">
        
    </div>
    <!-- ------------------------------- LOADER -------------------------------- -->


    <!-- ------------------------------- MODAL -------------------------------- -->
    <div class="mymodal">
        
    </div>
    <!-- ------------------------------- MODAL -------------------------------- -->


	
</div>  
<!--**********************************
    Scripts
***********************************-->
<script src="../assets/js/jquery.js"></script>
<script src="../assets/vendor/bootstrap/js/bootstrap.bundle.min.js"></script>
<script src="../assets/vendor/swiper/swiper-bundle.min.js"></script><!-- Swiper -->
<script src="../assets/js/dz.carousel.js"></script><!-- Swiper -->
<script src="../assets/vendor/bootstrap-touchspin/dist/jquery.bootstrap-touchspin.min.js"></script><!-- Swiper -->
<script src="../assets/js/settings.js"></script>
<script src="../assets/js/custom.js"></script>
<script src="../assets/js/modal.js"></script>
<script src="../assets/js/plugins/country-state-array.js"></script>
<script src="../assets/js/countrylist.js"></script>
<script src="https://checkout.flutterwave.com/v3.js"></script>
<script src="../assets/lib/pulltorefresh.js"></script>
<script src="../assets/js/env.js"></script> 
<script src="../assets/js/dashboard.js"></script>



<script src="../index.js" defer></script>
<script>
    $(".stepper").TouchSpin();
</script>
<script>
    // sidemenu();
    // populateUserDetails();
    fundWalletPage();
    populateCountryList();
</script>

<script>
    $(document).ready(()=>{
       
        

        document.getElementById("capture-camera-IDFront").addEventListener("click", function() {
            // Elements for taking the snapshot
            const video = document.querySelectorAll('video')[0];
            // canvas.width = video.videoWidth;
            // canvas.height = video.videoHeight;
            // canvas.getContext('2d').drawImage(video, 0, 0);
            // alert("Yes");

            let canvas = document.getElementById('canvas-IDFront');
            let photo = document.getElementById('photo-IDFront');  
            let photo_v = document.getElementById('photo-IDFront-v');  
            let context = canvas.getContext('2d');
            
            const height = video.videoHeight;
            const width = video.videoWidth;
            
            if (width && height) {    
                canvas.width = width;
                canvas.height = height;
                context.drawImage(video, 0, 0, width, height);    
                var data = canvas.toDataURL('image/png');
                photo.setAttribute('src', data);
                photo_v.setAttribute('src', data);

                $('.idFrontOutput').show();
                $('.idFrontError').html("");
                // on_stream_video.pause();
                on_stream_video.play();

                blobFile_Front = urlToFile(data)
                console.log(blobFile_Front, "File Front");
                // sessionStorage.setItem("blobFile_Front",JSON.parse(blobFile_Front));

                //Store form Data
                // var formData = new FormData();
                // formData.append("uploadfront", file, "filename");

                // console.log(formData);


            } else {
                clearphoto();
            }
        });

        

        // BackOutput
        document.getElementById("capture-camera-IDBack").addEventListener("click", function() {
            // Elements for taking the snapshot
            const video = document.querySelectorAll('video')[1];
            // canvas.width = video.videoWidth;
            // canvas.height = video.videoHeight;
            // canvas.getContext('2d').drawImage(video, 0, 0);
            // alert("Big boy");

            let canvas = document.getElementById('canvas-IDBack');
            let photo = document.getElementById('photo-IDBack');  
            let photo_v = document.getElementById('photo-IDBack-v');  
            let context = canvas.getContext('2d');
            
            const height = video.videoHeight;
            const width = video.videoWidth;
            
            if (width && height) {    
                canvas.width = width;
                canvas.height = height;
                context.drawImage(video, 0, 0, width, height);    
                var data = canvas.toDataURL('image/png');
                photo.setAttribute('src', data);
                photo_v.setAttribute('src', data);

                $('.idBackOutput').show();
                $('.idBackError').html("");
                // on_stream_video2.pause();
                on_stream_video2.play();

                blobFile_Back = urlToFile(data)
                console.log(blobFile_Back, "File Back");
                // sessionStorage.setItem("blobFile_Back",blobFile_Back);

            } else {
                clearphoto();
            }
        });



        // SWITCH PAGE SECTIONS 
        $('#idTypeandNumber').submit(function(e){
            e.preventDefault();
            $('#idTypeandNumberSection').hide();
            $('#frontIDSection').show();
        })
        $('#frontIDNextBtn').on('click',function(e){
            e.preventDefault();
            
            var photo_IDFrontSrc  = document.getElementById("photo-IDFront").src;
            if(!photo_IDFrontSrc){
                $('.idFrontError').html("&#9888; Snap front ID");
            }else{
                $('.idFrontError').html("");
                $('#frontIDSection').hide();
                $('#backIDSection').show();
            }
        })
        $('#backIDNextBtn').on('click',function(e){
            e.preventDefault();

            var photo_IDBackSrc  = document.getElementById("photo-IDBack").src;
            if(!photo_IDBackSrc){
                $('.idBackError').html("&#9888; Snap back ID");
            }else{
                $('.idBackError').html("");
                let idType = document.getElementById('idType').value;
                let idnumber = document.getElementById('idnumber').value;
                $('#idType-v').val(idType);
                $('#idnumber-v').val(idnumber);
                $('#backIDSection').hide();
                $('#idPreviewSection').show();
            }
        })
        // SWITCH PAGE SECTIONS




        $('#SubmitIDVerification').click(function(){

            var id_type = $('#idType-v').val();
            var id_number = $('#idnumber-v').val();
            var country = $('#countryList').val();
            var state = $('#stateList').val();
            var city = $('#city').val();
            var address = $('#address').val();
            var dob = $('#dob').val();
            var gender = $('#gender').val();
            var bvn = $('#bvn').val();

            let user = localStorage.getItem('zowaselUser');
            user = JSON.parse(user);
            let userid = user.user.id;
            let usertype = user.user.type;
            let firstname = user.user.first_name;
            let lastname = user.user.last_name;
            let phone = user.user.phone;

            
            console.log(blobFile_Front, "blobFile_Front");
            console.log(blobFile_Back, "blobFile_Back");

            //Store form Data
            var formData = new FormData();

            formData.append("id_type", id_type);
            formData.append("id_number", id_number);
            formData.append("first_name", firstname);
            formData.append("last_name", lastname);
            formData.append("phone_number", phone);
            formData.append("country", country);
            formData.append("state", state);
            formData.append("city", city);
            formData.append("address", address);
            formData.append("dob", dob);
            formData.append("gender", gender);
            formData.append("bvn", bvn);
            formData.append("front", blobFile_Front, `idfrontcard${userid}.${blobFile_Front.type.split("/")[1]}`);
            // // form.append("front", fileInput.files[0], "idcard.png");
            formData.append("back", blobFile_Back, `idcardback${userid}.${blobFile_Back.type.split("/")[1]}`);

            // console.log(formData, "formData");
            startPageLoader();
            var settings = {
                "url": `${liveMobileUrl}/users/account/kyc`,
                "method": "POST",
                "timeout": 0,
                "headers": {
                    // "Content-Type": "application/json",
                    "authorization": localStorage.getItem('authToken')
                },
                "processData": false,
                "mimeType": "multipart/form-data",
                "contentType": false,
                "data": formData
            };

            $.ajax(settings).done(function (data) {
                // console.log(data);
                let response = JSON.parse(data);
                EndPageLoader();
                if(response.error == true){
                    // alert(response.message);
                    responsemodal("erroricon.png", "Error", response.message);
                }else{
                    responsemodal("successicon.png", "Success", response.message);
                    setTimeout(()=>{
                        // $("#addInputForm")[0].reset();
                        
                    },2000)
                    
                }
            });
        })



    })

    // GO BACK TO PREVIOUS SECTION
    function gobacktoSection(n){
        // alert(n);
        $('.kyccard').hide();
        $(`#${n}`).show();
    }
    // GO BACK TO PREVIOUS SECTION



    


</script>

</body>
</html>