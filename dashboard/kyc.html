<!DOCTYPE html>
<html lang="en">
    <head>
    <script type="text/javascript"  src="../assets/js/accessauthentication_dashboard.js"></script>
	<!-- Meta -->
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, minimum-scale=1, minimal-ui, viewport-fit=cover">
	<meta name="theme-color" content="#2196f3">
	<meta name="author" content="DexignZone" /> 
    <meta name="keywords" content="" /> 
    <meta name="robots" content="" /> 
	<meta name="description" content="Zowasel"/>
	<meta property="og:title" content="Zowasel" />
	<meta property="og:description" content="Zowasel" />
	<meta property="og:image" content="https://zowasel.com/images/logos/white%20logo.png"/>
	<meta name="format-detection" content="telephone=no">
	
    <!-- Favicons Icon -->
	<link rel="shortcut icon" type="image/x-icon" href="../assets/images/favicon.png" />
    
    <!-- Title -->
	<title>Zowasel Mobile Web</title>
	
	<!-- PWA Version -->
	<!-- <link rel="manifest" href="manifest.json"> -->

    <link rel="stylesheet" href="dist/css/dialog-mobile.css">
    <script src="dist/mcx-dialog.js"></script>  
    
    <!-- Stylesheets -->
	<link rel="stylesheet" href="../assets/vendor/bootstrap-touchspin/dist/jquery.bootstrap-touchspin.min.css">
    <link rel="stylesheet" href="../assets/vendor/swiper/swiper-bundle.min.css">
    <link rel="stylesheet" type="text/css" href="../assets/css/style.css">
    <link rel="stylesheet" type="text/css" href="../assets/css/style2.css">
    <link rel="stylesheet" type="text/css" href="../bypass.css">
    
    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Lato:wght@100;300;400;700;900&family=Roboto+Slab:wght@100;300;500;600;800&display=swap" rel="stylesheet">
    <script src="https://cdn.socket.io/4.6.0/socket.io.min.js" integrity="sha384-c79GN5VsunZvi+Q/WObgk2in0CbZsHnjEqvFxC5DxHn9lTfNce2WW6h2pH6u/kF+" crossorigin="anonymous"></script>
    
     <!--
        Ideally these elements aren't created until it's confirmed that the 
        client supports video/camera, but for the sake of illustrating the 
        elements involved, they are created with markup (not JavaScript)
    -->
    <!-- SNAP -->
    <style>
        video  {
        /* width: 192px;
        height: 192px; */
        background: rgba(0,0,0,0.2);
        /* -webkit-transform: scaleX(-1); mirror effect while using front cam */
        /* transform: scaleX(-1);         mirror effect while using front cam */
        }

        #canvas-IDFront  {
        /* width: 192px; */
        /* height: 192px; */
        /* -webkit-transform: scaleX(-1);mirror effect while using front cam */
        /* transform: scaleX(-1);         mirror effect while using front cam */
        }
        .cameraBorder{
            background: #FFFFFF;
            border: 3px dashed rgba(0, 0, 0, 0.51);
            /* border-radius: 21px; */
        }
        .captureBorder{
            background: #FFFFFF;
            /* border: 3px dashed rgba(0, 0, 0, 0.51);
            border-radius: 21px; */
        }
        .idFrontOutput,.idBackOutput{
            display: none;
            text-align: center;
        }
    </style>

</head>   
<body class="bg-white">
<div class="page-wraper">
    
    <!-- Header -->
    <header class="header">
        <div class="main-bar">
            <div class="container">
                <div class="header-content">
                    <div class="left-content text-white">
                        <a href="javascript:void(0);" class="back-btn">
                            <svg width="18" height="18" viewBox="0 0 10 16" fill="none" xmlns="http://www.w3.org/2000/svg">
								<path d="M9.03033 0.46967C9.2966 0.735936 9.3208 1.1526 9.10295 1.44621L9.03033 1.53033L2.561 8L9.03033 14.4697C9.2966 14.7359 9.3208 15.1526 9.10295 15.4462L9.03033 15.5303C8.76406 15.7966 8.3474 15.8208 8.05379 15.6029L7.96967 15.5303L0.96967 8.53033C0.703403 8.26406 0.679197 7.8474 0.897052 7.55379L0.96967 7.46967L7.96967 0.46967C8.26256 0.176777 8.73744 0.176777 9.03033 0.46967Z" fill="#a19fa8"/>
							</svg>
                        </a>
                        <h5 class="mb-0 ms-2 zowasel-white-color">Kyc Verification</h5>
                    </div>
                    <div class="mid-content">
                    </div>
                    <div class="right-content">
                        <button class="btn verificationStatus">Unverified</button>
                    </div>
                </div>
            </div>
        </div>
    </header>
    <!-- Header End -->
    
    <!-- Preloader -->
	<!-- <div id="preloader">
		<div class="spinner"></div>
	</div> -->
    <!-- Preloader end-->
    
	<!-- Sidebar -->
    <div class="sidebar" id="sidebar">
		
    </div>
    <!-- Sidebar End -->
    
   
    <!-- Banner -->
	<!-- <div class="author-notification">
		<div class="container inner-wrapper">
			
				
		</div>
	</div> -->
    <!-- Banner End -->

    
    <!-- Page Content -->
    <div id="main" class="page-content bottom-content" style="background: #f7f7f7;height:93vh;">
        <div class="container">

            <!-- row -->
            <div class="row mt-4">
                <div class="col-12">
                    <div class="kyccard" id="idTypeandNumberSection">
                        <div class="card-body">
							<form id="idTypeandNumber">
                                <label style="color:#2c2646d1;font-weight:700;">Type</label>
								<div class="mb-3 input-group">
									<span class="input-group-text"><i class="fas fa-money-check"></i></span>
									<select required id="idType" class="form-control">
                                        <option value="">Select ID Type</option>
                                        <option value="vnin">Virtual NIN</option>
                                        <option value="driver_license">Driver's Licence</option>
                                        <option value="voter_card">Voter's Card</option>
                                        <!-- <option value="identity_card">Identity Card</option> -->
                                        <option value="passport">Passport</option>
                                    </select>
								</div>

                                <label style="color:#2c2646d1;font-weight:700;">Id Number</label>
								<div class="mb-3 input-group">
									<!-- <span class="input-group-text"><i class="fas fa-hashtag"></i></span> -->
									<input required min="5" id="idnumber" class="form-control" />
								</div>

                                <!-- <div class="w-100 mb-3">
                                    <label for="exampleInputEmail1" class="form-label mb-0">Country <span class="required">*</span></label>
                                    <select class="form-select" id="countryList" aria-label="Default select example" required="">
                                        
                                    </select>
                                </div> -->
                                <!-- <div class="w-100 mb-3">
                                    <label for="exampleInputEmail1" class="form-label mb-0">State <span class="required">*</span></label>
                                    <select class="form-select" id="stateList" aria-label="Default select example" required="">
                                        <option value="">- Select state -</option>
                                        
                                    </select>
                                </div> -->

                                <!-- <label style="color:#2c2646d1;font-weight:700;">City</label>
								<div class="mb-3 input-group">
									<input required id="city" class="form-control" />
								</div> -->

                                <!-- <label style="color:#2c2646d1;font-weight:700;">Address</label>
								<div class="mb-3 input-group">
									<input required id="address" class="form-control" />
								</div> -->

                                <label style="color:#2c2646d1;font-weight:700;">Date of Birth</label>
								<div class="mb-3 input-group">
									<!-- <span class="input-group-text"><i class="fas fa-hashtag"></i></span> -->
									<input type="date" required id="dob" class="form-control" />
								</div>

                                <label style="color:#2c2646d1;font-weight:700;">Gender</label>
								<div class="mb-3 input-group">
									<select class="form-select" id="gender" aria-label="Default select example" required="">
                                        <option value="">- Select gender -</option>
                                        <option value="male">Male</option>
                                        <option value="female">Female</option>
                                    </select>
								</div>

                                <label style="color:#2c2646d1;font-weight:700;">BVN</label>
								<div class="mb-3 input-group">
									<!-- <span class="input-group-text"><i class="fas fa-hashtag"></i></span> -->
									<input required id="bvn" class="form-control" />
								</div>


								<div class="text-center">
                                    <button type="submit" class="btn btn-dark mt-3 ">Next</button>
                                </div>
							</form>
						</div>
                    </div>

                    <!-- ID FRONT -->
                    <div class="kyccard" id="frontIDSection" style="display: none;position:relative;">
                        
                        <div class="card-body">
							<div class="idUploadFormHolder">
                                <label style="color:#2c2646d1;font-weight:700;" class="text-center d-block">ID Front</label>
                                <!-- <span style="color:#2c2646d1;font-weight:700;font-size:12px;" class="text-center d-block">Please snap the front of your Selected id</span> -->
                                <span style="color:#2c2646d1;font-weight:700;font-size:12px;" class="text-center d-block">Please upload the front of your Selected id</span>
								
                                <!-- Camera -->
                                <div class="container">
                                    <div class="text-center">
                                      <!-- <video id="camera-stream-IDFront" autoplay muted playsinline class="cameraBorder w-100">Not available</video> -->
                                      <label class="upload__btn">
                                        <!-- <p style="margin:0px;padding-top:11px;color:#7e7e7e;" class="fw-bold">Upload images +</p> -->
                                        <img src="../assets/icons/camerasnap.png" id="photo-IDFront" />
                                        <input type="file" id="cropimages" data-max_length="0" class="upload__inputfile upload__inputfile_frontID" required accept="image/png, image/jpg, image/jpeg">
                                      </label>
                                      <div class="upload__img-wrap"></div>
                                    </div>
                                </div>

                                <div class="idFrontError text-danger text-center"></div>
                                <!-- SNAP -->

								<div class="text-center">
                                    <button type="button" class="btn btn-dark mt-3" onclick="gobacktoSection(`idTypeandNumberSection`)">Prev</button>
                                    <button type="button" id="frontIDNextBtn" class="btn btn-dark mt-3 ">Next</button>
                                </div>
							</div>
						</div>
                    </div>

                    <!-- ID BACK -->
                    <div class="kyccard" id="backIDSection" style="display: none;position:relative;">

                        <div class="card-body">
							<div id="payForm">
                                <label style="color:#2c2646d1;font-weight:700;" class="text-center d-block">ID Back</label>
                                <span style="color:#2c2646d1;font-weight:700;font-size:12px;" class="text-center d-block">Please upload the back of your Selected id</span>
								
                                <!-- Camera -->
                                <div class="container">
                                    <div class="text-center">
                                      <!-- <video id="camera-stream-IDFront" autoplay muted playsinline class="cameraBorder w-100">Not available</video> -->
                                      <label class="upload__btn">
                                        <!-- <p style="margin:0px;padding-top:11px;color:#7e7e7e;" class="fw-bold">Upload images +</p> -->
                                        <img src="../assets/icons/camerasnap.png" id="photo-IDBack" />
                                        <input type="file" id="cropimagesvvv" data-max_length="0" class="upload__inputfile upload__inputfile_backID" required accept="image/png, image/jpg, image/jpeg">
                                      </label>
                                      <div class="upload__img-wrap2"></div>
                                    </div>
                                </div>

                                <div class="idBackError text-danger text-center"></div>
                                <!-- SNAP -->

								<div class="text-center">
                                    <button type="button" class="btn btn-dark mt-3" onclick="gobacktoSection(`frontIDSection`)">Prev</button>
                                    <button type="button" id="backIDNextBtn" class="btn btn-dark mt-3 ">Next</button>
                                </div>
							</div>
						</div>
                    </div>

                    <!-- PREVIEW UPLOADED DOCUMENT -->
                    <div class="kyccard" id="idPreviewSection" style="display: none;position:relative;">

                        <div class="card-body">
							<div id="payForm">
                                <!-- ---------------------- PREVIEW SUBMITTED DETAILS ----------------------- -->
                                <div class="row">
                                    <div class="row col-12">
                                        <div class="col-6 each-detail">
                                            <h4 class="font-16">ID Type</h4>
                                            <p class="idType-v"> </p>
                                        </div>
                                        <div class="col-6 each-detail">
                                            <h4 class="font-16">ID Number</h4>
                                            <p class="idnumber-v"> </p>
                                        </div>
                                    </div>
                                </div>

                                <div class="row mt-2">
                                    <div class="row col-12">
                                        <div class="col-6 each-detail">
                                            <h4 class="font-16">Name</h4>
                                            <p class="kyc_name-v"> </p>
                                        </div>
                                        <div class="col-6 each-detail">
                                            <h4 class="font-16">Gender</h4>
                                            <p class="kyc_gender-v"> </p>
                                        </div>
                                    </div>
                            
                                    <div class="row col-12">
                                        <div class="col-6 each-detail">
                                            <h4 class="font-16">Phone Number</h4>
                                            <p class="kyc_phoneno-v"> </p>
                                        </div>
                                        <div class="col-6 each-detail">
                                            <h4 class="font-16">Address</h4>
                                            <p class="kyc_address-v"> </p>
                                        </div>
                                    </div>
                            
                                    <div class="row col-12">
                                        <div class="col-6 each-detail">
                                            <h4 class="font-16">Date of Birth</h4>
                                            <p class="kyc_dob-v"> </p>
                                        </div>
                                        <div class="col-6 each-detail">
                                            <h4 class="font-16">Country</h4>
                                            <p class="kyc_country-v"> </p>
                                        </div>
                                    </div>
                            
                                    <div class="row col-12">
                                        <div class="col-6 each-detail">
                                            <h4 class="font-16">State</h4>
                                            <p class="kyc_state-v"> </p>
                                        </div>
                                        <div class="col-6 each-detail">
                                            <h4 class="font-16">City</h4>
                                            <p class="kyc_city-v"> </p>
                                        </div>
                                    </div>
                                </div>
                                <!-- ---------------------- PREVIEW SUBMITTED DETAILS ---------------------- -->


                                <!-- ID FRONT -->
                                <label style="color:#2c2646d1;font-weight:700;" class="text-center d-block">ID Front</label>
                                <img id="photo-IDFront-v" class="captureBorder w-100" alt="The image uploaded will appear in this box.">

                                <!-- ID BACK -->
                                <label style="color:#2c2646d1;font-weight:700;" class="text-center d-block mt-2">ID Back</label>
                                <img id="photo-IDBack-v" class="captureBorder w-100" alt="The image uploaded will appear in this box.">

								<div class="text-center">
                                    <button type="button" class="btn border border-dark mt-3" onclick="gobacktoSection(`idTypeandNumberSection`)">Edit</button>
                                    <button type="button" id="SubmitIDVerification" class="btn btn-dark mt-3 ">Submit</button>
                                </div>
							</div>
						</div>
                    </div>


                </div>
            </div>
            <!-- row -->

        </div>

    </div>
    <!-- Page Content End-->



    <!-- ------------------------------- LOADER -------------------------------- -->
    <div class="loader">
        
    </div>
    <!-- ------------------------------- LOADER -------------------------------- -->


    <!-- ------------------------------- MODAL -------------------------------- -->
    <div class="mymodal">
        
    </div>
    <!-- ------------------------------- MODAL -------------------------------- -->


	
</div>  
<!--**********************************
    Scripts
***********************************-->
<script src="../assets/js/jquery.js"></script>
<script src="../assets/vendor/bootstrap/js/bootstrap.bundle.min.js"></script>
<script src="../assets/vendor/swiper/swiper-bundle.min.js"></script><!-- Swiper -->
<script src="../assets/js/dz.carousel.js"></script><!-- Swiper -->
<script src="../assets/vendor/bootstrap-touchspin/dist/jquery.bootstrap-touchspin.min.js"></script><!-- Swiper -->
<script src="../assets/js/settings.js"></script>
<script src="../assets/js/custom.js"></script>
<script src="../assets/js/modal.js"></script>
<script src="../assets/js/plugins/country-state-array.js"></script>
<script src="../assets/js/countrylist.js"></script>
<script src="https://checkout.flutterwave.com/v3.js"></script>
<script src="../assets/lib/pulltorefresh.js"></script>
<script src="../assets/js/env.js"></script> 
<script src="../assets/js/dashboard.js"></script>



<script src="../index.js" defer></script>
<script>
    $(".stepper").TouchSpin();
</script>
<script>
    // sidemenu();
    // populateUserDetails();
    fundWalletPage();
    populateCountryList();
    // pageRestriction(); KYC RESTRICTION COMMENTED OUT
</script>

<script>
    $(document).ready(()=>{

        // $('#dob').attr('max', new Date().toISOString().split('T')[0]);
        //  To get yesterday's date
        var date = new Date();
        let yesterday = date.setDate(date.getDate() - 1);
        $('#dob').attr('max', date.toISOString().split('T')[0]);



        // <!-- --------------------------- UPLOAD DOCUMENT --------------------------- -->
        
        $('.upload__inputfile_frontID').each(function () {
            var imgWrap = "";
            var imgArray = [];
            $(this).on('change', function (e) {
                // alert("vr");
                var files = e.target.files;
                var filesArr = Array.prototype.slice.call(files);
                console.log("filesArr", filesArr);
                var iterator = 0;
                filesArr.forEach(function (f, index) {

                    if (!f.type.match('image.*')) {
                        return;
                    }
                    // console.log("imgArray.length",imgArray.length);     
                    imgArray.push(f);

                    console.log(imgArray, " image Array");
                    globalImageArrayLength = imgArray.length;
                    var reader = new FileReader();
                    reader.onload = function (e) {
                        document.getElementById('photo-IDFront').setAttribute('src', e.target.result);
                        let data = e.target.result;
                        blobFile_Front = urlToFile(data)
                        iterator++;
                    }
                    reader.readAsDataURL(f);
                });
            });
        });


        $('.upload__inputfile_backID').each(function () {
            var imgWrap = "";
            var imgArray = [];
            $(this).on('change', function (e) {
                // alert("vr");
                var files = e.target.files;
                var filesArr = Array.prototype.slice.call(files);
                console.log("filesArr", filesArr);
                var iterator = 0;
                filesArr.forEach(function (f, index) {

                    if (!f.type.match('image.*')) {
                        return;
                    }
                    // console.log("imgArray.length",imgArray.length);     
                    imgArray.push(f);

                    console.log(imgArray, " image Array");
                    globalImageArrayLength = imgArray.length;
                    var reader = new FileReader();
                    reader.onload = function (e) {
                        document.getElementById('photo-IDBack').setAttribute('src', e.target.result);
                        iterator++;
                        let data = e.target.result;
                        blobFile_Back = urlToFile(data)
                    }
                    reader.readAsDataURL(f);
                });
            });
        });
        // <!-- --------------------------- UPLOAD DOCUMENT --------------------------- -->


       

        
        let blobFile_Front, blobFile_Back;

        function DataURIToBlob(dataURI) {
            const splitDataURI = dataURI.split(',')
            const byteString = splitDataURI[0].indexOf('base64') >= 0 ? atob(splitDataURI[1]) : decodeURI(splitDataURI[1])
            const mimeString = splitDataURI[0].split(':')[1].split(';')[0]

            const ia = new Uint8Array(byteString.length)
            for (let i = 0; i < byteString.length; i++)
                ia[i] = byteString.charCodeAt(i)

            return new Blob([ia], { type: mimeString })
        }

        function urlToFile(url){
            let arr = url.split(",");
            // console.log(arr);
            let mime = arr[0].match(/:(.*?);/)[1];
            let data = arr[1]; //encoded in base64

            let dataStr = atob(data); //decode the base64
            let n = dataStr.length;
            let dataArr = new Uint8Array(n);

            while(n--){
                dataArr[n] = dataStr.charCodeAt(n);
            }
            // console.log(dataArr); //This is what we need to create a file

            let file = new File([dataArr], 'File.jpg', {type: mime});
            // console.log(file);
            return file;

            // console.log("mime",mime);
            // console.log("data",data);
        }

    

        // SWITCH PAGE SECTIONS 
        // let frontIDLink, backIDLink;
        $('#idTypeandNumber').submit(function(e){
            e.preventDefault();
            let idType = document.getElementById('idType').value;
            let idnumber = document.getElementById('idnumber').value;
            if(idType=="vnin"){
                console.log(idnumber.length);
                if(idnumber.length === 16){
                    $('#idTypeandNumberSection').hide();
                    $('#frontIDSection').show();
                }else if (idnumber.length > 16) {
                    basicmodal("","IDNumber must be shorter than or equal to 16 characters");
                    return false;
                }else if (idnumber.length < 16) {
                    basicmodal("","IDNumber must be greater than or equal to 16 characters");
                    return false;
                }
            }
            if(idType=="driver_license"){
                if(idnumber.length === 10){
                    $('#idTypeandNumberSection').hide();
                    $('#frontIDSection').show();
                }else if (idnumber.length > 12) {
                    basicmodal("","IDNumber must be shorter than or equal to 12 characters");
                    return false;
                }else if (idnumber.length < 10) {
                    basicmodal("","IDNumber must be greater than or equal to 10 characters");
                    return false;
                }
            }
            if(idType=="voter_card"){
                if(idnumber.length === 17){
                    $('#idTypeandNumberSection').hide();
                    $('#frontIDSection').show();
                }else if (idnumber.length > 17) {
                    $('#idTypeandNumberSection').hide();
                    $('#frontIDSection').show();
                }else if (idnumber.length < 17 || idnumber.length < 20) {
                    basicmodal("","IDNumber must be greater than or equal to 17 characters");
                    return false;
                }
            }
            if(idType=="passport"){
                if(idnumber.length === 7){
                    $('#idTypeandNumberSection').hide();
                    $('#frontIDSection').show();
                }else if (idnumber.length > 7) {
                    basicmodal("","IDNumber must be shorter than or equal to 7 characters");
                    return false;
                }else if (idnumber.length < 7) {
                    basicmodal("","IDNumber must be greater than or equal to 7 characters");
                    return false;
                }
            }
            $('#idTypeandNumberSection').hide();
            $('#frontIDSection').show();
        })
        $('#frontIDNextBtn').on('click',function(e){
            e.preventDefault();
            
            var photo_IDFrontSrc  = document.getElementById("photo-IDFront").src;
            console.log(photo_IDFrontSrc);
            if(!photo_IDFrontSrc){
                $('.idFrontError').html("&#9888; Upload front ID");
            }else if(photo_IDFrontSrc.includes("assets/icons")){
                $('.idFrontError').html("&#9888; Upload front ID");
            }else{
                $('.idFrontError').html("");
                $('.dialogbox').addClass('d-none');
                $('.dialogbox').removeClass('d-block');
                $('#frontIDSection').hide();
                $('#backIDSection').show();

                let frontPhoto_v = document.getElementById('photo-IDFront-v');
                frontPhoto_v.setAttribute('src',photo_IDFrontSrc);

                // <!-- ------------------------ PING IMAGE UPLOAD URL ------------------------ -->
                // let user = localStorage.getItem('zowaselUser');
                // user = JSON.parse(user);
                // let userid = user.user.id;
                // //Store form Data
                // var formData = new FormData();
                // console.log(blobFile_Front, "The id");
                // formData.append("image", blobFile_Front, `idfrontcard${userid}.${blobFile_Front.type.split("/")[1]}`);
                // // // form.append("front", fileInput.files[0], "idcard.png");
                // startPageLoader();
                // var settings = {
                //     "url": `${imageUploadUrl}`,
                //     "method": "POST",
                //     "timeout": 0,
                //     "headers": {
                //         // "Content-Type": "application/json",
                //         "authorization": localStorage.getItem('authToken')
                //     },
                //     "processData": false,
                //     "mimeType": "multipart/form-data",
                //     "contentType": false,
                //     "data": formData
                // };

                // $.ajax(settings).done(function (data) {
                //     // console.log(data);
                //     let response = JSON.parse(data);
                //     EndPageLoader();
                //     if(response.error == true){
                //         // alert(response.message);
                //         responsemodal("erroricon.png", "Error", response.message);
                //     }else{
                //         responsemodal("successicon.png", "Success", "Front ID Sent");
                //         frontIDLink = response.data.imageLink;
                //         setTimeout(()=>{
                //             $('.dialogbox').addClass('d-none');
                //             $('.dialogbox').removeClass('d-block');
                //             $('#frontIDSection').hide();
                //             $('#backIDSection').show();
                //         },2000)
                //     }
                // });

            }
        })

        $('#backIDNextBtn').on('click',function(e){
            e.preventDefault();

            var photo_IDBackSrc  = document.getElementById("photo-IDBack").src;
            if(!photo_IDBackSrc){
                $('.idBackError').html("&#9888; Upload back ID");
            }else if(photo_IDBackSrc.includes("assets/icons")){
                $('.idBackError').html("&#9888; Upload back ID");
            }else{
                $('.idBackError').html("");
                $('.dialogbox').addClass('d-none');
                $('.dialogbox').removeClass('d-block');
                let idType = document.getElementById('idType').value;
                let idnumber = document.getElementById('idnumber').value;
                $('.idType-v').html(idType);
                $('.idnumber-v').html(idnumber);

                // console.log("photo_IDBackSrc",photo_IDBackSrc);
                let backPhoto_v = document.getElementById('photo-IDBack-v');
                backPhoto_v.setAttribute('src',photo_IDBackSrc);

                let user = localStorage.getItem('zowaselUser');
                user = JSON.parse(user);
                let userid = user.user.id;
                let usertype = user.user.type;
                let firstname = user.user.first_name;
                let lastname = user.user.last_name;
                let gender;
                if(user.user.gender){
                    gender = user.user.gender;
                }else{
                    gender = document.getElementById('gender').value;
                }
                let phone = user.user.phone;
                let dob;
                if(user.user.dob){
                    dob = user.user.dob;
                }else{
                    dob = document.getElementById('dob').value;
                }
                let country = user.user.country;
                let state = user.user.state;
                let city = user.user.city;
                let address = user.user.primary_address;
                let company = user.user.company;

                $('.kyc_name-v').html(firstname+" "+lastname);
                $('.kyc_gender-v').html(gender);
                $('.kyc_phoneno-v').html(phone);
                $('.kyc_address-v').html(address);
                $('.kyc_dob-v').html(dob);
                $('.kyc_country-v').html(country);
                $('.kyc_state-v').html(state);
                $('.kyc_city-v').html(city);


                $('#backIDSection').hide();
                $('#idPreviewSection').show();

                // <!-- ------------------------ PING IMAGE UPLOAD URL ------------------------ -->
                // let user = localStorage.getItem('zowaselUser');
                // user = JSON.parse(user);
                // let userid = user.user.id;
                // //Store form Data
                // var formData = new FormData();
                // console.log(blobFile_Back, "The Back id");
                // formData.append("image", blobFile_Back, `idbackcard${userid}.${blobFile_Back.type.split("/")[1]}`);
                // // // form.append("front", fileInput.files[0], "idcard.png");
                // startPageLoader();
                // var settings = {
                //     "url": `${imageUploadUrl}`,
                //     "method": "POST",
                //     "timeout": 0,
                //     "headers": {
                //         // "Content-Type": "application/json",
                //         "authorization": localStorage.getItem('authToken')
                //     },
                //     "processData": false,
                //     "mimeType": "multipart/form-data",
                //     "contentType": false,
                //     "data": formData
                // };

                // $.ajax(settings).done(function (data) {
                //     // console.log(data);
                //     let response = JSON.parse(data);
                //     EndPageLoader();
                //     if(response.error == true){
                //         // alert(response.message);
                //         responsemodal("erroricon.png", "Error", response.message);
                //     }else{
                //         responsemodal("successicon.png", "Success", "Back ID Sent");
                //         backIDLink = response.data.imageLink;
                //         setTimeout(()=>{
                //             $('.dialogbox').addClass('d-none');
                //             $('.dialogbox').removeClass('d-block');
                //             let idType = document.getElementById('idType').value;
                //             let idnumber = document.getElementById('idnumber').value;
                //             $('#idType-v').val(idType);
                //             $('#idnumber-v').val(idnumber);
                //             $('#backIDSection').hide();
                //             $('#idPreviewSection').show();
                //         },2000)
                //     }
                // });

            }
        })
        // SWITCH PAGE SECTIONS




        $('#SubmitIDVerification').click(function(){

            var id_type = $('#idType').val();
            var id_number = $('#idnumber').val();
            // var country = $('#countryList').val();
            // var state = $('#stateList').val();
            // var city = $('#city').val();
            // var address = $('#address').val();
            var dob = $('#dob').val();
            var gender = $('#gender').val();
            var bvn = $('#bvn').val();

            let user = localStorage.getItem('zowaselUser');
            user = JSON.parse(user);
            let userid = user.user.id;
            let usertype = user.user.type;
            let firstname = user.user.first_name;
            let lastname = user.user.last_name;
            let phone = user.user.phone;
            let country = user.user.country;
            let state = user.user.state;
            let city = user.user.city;
            let address = user.user.primary_address;
            let company = user.user.company;

            
            console.log(blobFile_Front, "blobFile_Front");
            console.log(blobFile_Back, "blobFile_Back");

            // <!-- ------------------------ PING IMAGE UPLOAD URL ------------------------ -->
            startPageLoader();
            let img1,img2;

            // console.log(blobFile_Front, "yeye");
            var fd = new FormData();  
            // fd.append( 'file', input.files[0] );
            fd.append("image", blobFile_Front);
            fetch('https://filesapi.growsel.com/upload.php', {method: 'POST',body: fd}).then(response => response.json())
            .then(data => {
                // console.log("Chima", data);
                if(data.error == false){
                    img1 = data.data.imageLink;

                    fd = new FormData();
                    fd.append("image", blobFile_Back);
                    fetch('https://filesapi.growsel.com/upload.php', {method: 'POST',body: fd}).then(response => response.json())
                    .then(data => {
                        // console.log("Chima", data);
                        if(data.error == false){
                            img2 = data.data.imageLink;

                            //Store form Data
                            var formData = new FormData();

                            formData.append("id_type", id_type);
                            formData.append("id_number", id_number);
                            formData.append("first_name", firstname);
                            formData.append("last_name", lastname);
                            formData.append("phone_number", phone);
                            formData.append("country", country);
                            formData.append("state", state);
                            formData.append("city", city);
                            formData.append("address", address);
                            formData.append("dob", dob);
                            formData.append("gender", gender);
                            formData.append("bvn", bvn);
                            formData.append("img1", img1);
                            formData.append("img2", img2);
                            formData.append("front", blobFile_Front, `idfrontcard${userid}.${blobFile_Front.type.split("/")[1]}`);
                            // // form.append("front", fileInput.files[0], "idcard.png");
                            formData.append("back", blobFile_Back, `idcardback${userid}.${blobFile_Back.type.split("/")[1]}`);

                            // console.log(id_type+id_number+firstname+lastname+phone+country+state+city+address+dob+gender+bvn, "formData");
                            // console.log(blobFile_Front, "formData");
                            // console.log(blobFile_Back, "formData");
                            var settings = {
                                "url": `${liveMobileUrl}/users/account/kyc`,
                                "method": "POST",
                                "timeout": 0,
                                "headers": {
                                    // "Content-Type": "application/json",
                                    "authorization": localStorage.getItem('authToken')
                                },
                                "processData": false,
                                "mimeType": "multipart/form-data",
                                "contentType": false,
                                "data": formData
                            };

                            $.ajax(settings).done(function (data) {
                                // console.log(data);
                                let response = JSON.parse(data);
                                EndPageLoader();
                                if(response.error == true){
                                    // alert(response.message);
                                    responsemodal("erroricon.png", "Error", response.message);
                                }else{
                                    responsemodal("successicon.png", "Success", response.message+"<br/>Verification is in progress");
                                    setTimeout(()=>{
                                        // $("#addInputForm")[0].reset();

                                        if(company){
                                            basicmodal("","Continue with KYB, Redirecting...")
                                            // mcxDialog.confirm("Continue with Kyb", {
                                            //     sureBtnClick: function(){
                                            //         // callback
                                            //         location.assign('kyb.html');                                
                                            //     }
                                            // });
                                            setTimeout(()=>{
                                                location.assign('kyb.html');
                                            },3000)
                                        }else{
                                            // pageRestriction(); KYC RESTRICTION COMMENTED OUT
                                            startPageLoader();
                                            setTimeout(()=>{
                                                location.assign('/dashboard/verification.html');
                                                EndPageLoader();
                                            },2000)
                                        }
                                        
                                    },2000)
                                    
                                }
                            });
                        }
                    })
                }
            }).catch(error => {
    // Handle any errors
    console.error('Error:', error);
  });
        })
        
    })

    // GO BACK TO PREVIOUS SECTION
    function gobacktoSection(n){
        // alert(n);
        $('.kyccard').hide();
        $(`#${n}`).show();
    }
    // GO BACK TO PREVIOUS SECTION



    


</script>

</body>
</html>