<!DOCTYPE html>
<html lang="en">
<head>
    
    <!-- Meta -->
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, minimum-scale=1, minimal-ui, viewport-fit=cover">
	<meta name="theme-color" content="#2196f3">
	<meta name="author" content="DexignZone" /> 
    <meta name="keywords" content="" /> 
    <meta name="robots" content="" /> 
	<meta name="description" content="Zowasel"/>
	<meta property="og:title" content="Zowasel" />
	<meta property="og:description" content="Zowasel" />
	<meta property="og:image" content="https://makaanlelo.com/tf_products_007/foodia/xhtml/social-image.png"/>
	<meta name="format-detection" content="telephone=no">
    
    <!-- Favicons Icon -->
	<link rel="shortcut icon" type="image/x-icon" href="assets/images/favicon.png" />
    
    <!-- Title -->
	<title>Zowasel Mobile</title>
    
    <!-- Stylesheets -->
    <link rel="stylesheet" href="assets/vendor/swiper/swiper-bundle.min.css">
    <link rel="stylesheet" type="text/css" href="assets/css/style.css">
    <link rel="stylesheet" type="text/css" href="assets/css/style2.css">
    
    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Lato:wght@100;300;400;700;900&family=Roboto+Slab:wght@100;300;500;600;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="bypass.css"/>
</head>   
<body class="bg-white">
<div class="page-wraper">

    <!-- Preloader -->
	<!-- <div id="preloader">
		<div class="spinner"></div>
	</div> -->
    <!-- Preloader end-->

    <!-- Page Content -->
    <div id="main" class="page-content">
        
        <!-- Banner -->
        <div class="banner-wrapper">
            <div class="circle-1"></div>
            <div class="container inner-wrapper">
                <h1 class="dz-title">       <img src="logos/logo.png" width="180px" class="brand-title text-white mt-2"/>
                </h1>
              
            </div>
        </div>
        <!-- Banner End -->
        <div class="account-box">
            <div class="container">
                <div class="account-area">
                    <h3 class="title">Create Password</h3>
                    <p>Set-up a unique password to login to your account with</p>
					<form>
						<div class="mb-3 input-group input-mini">
							<span class="input-group-text"><i class="fa fa-lock"></i></span>
							<input type="password" id="password" class="form-control dz-password" placeholder="Create Password">
							<span class="input-group-text show-pass"> 
								<i class="fa fa-eye-slash"></i>
								<i class="fa fa-eye"></i>
							</span>
						</div>

                        <div class="mb-3 input-group input-mini">
							<span class="input-group-text"><i class="fa fa-lock"></i></span>
							<input type="password" id="confirmPassword" class="form-control dz-password" placeholder="Confirm Password">
							<span class="input-group-text show-pass"> 
								<i class="fa fa-eye-slash"></i>
								<i class="fa fa-eye"></i>
							</span>
						</div>

                        <p class="incorrectMsg">Passwords do not match!</p>

                        <!--  -->
                        <div class="pswd_info">
                            <h4 class="pswd_reqs">Password must meet the following requirements:</h4>
                            <ul>
                              <li id='letter' class='invalid'>Contains <strong>a lowercase letter</strong></li>
                        
                              <li id='capital' class='invalid'>Contains <strong>a capital letter</strong></li>
                        
                              <li id='number' class='invalid'>Contains <strong>a number</strong></li>
                        
                              <li id='special' class='invalid'>Contains <strong>a special character</strong></li>
                        
                              <li id='length' class='invalid'>Contains <strong>8 characters</strong></li>
                            </ul>
                          </div>
                        <!--  -->




						<div class="input-group">
							<a onclick="createPassword()" class="btn mt-2 btn-success w-100 btn-rounded">SIGN UP</a>
						</div>
						<div class="d-flex justify-content-between align-items-center">
						
							<a href="#" class="btn-link text-dark">Forgot password?</a>
						</div>
					</form>  
                    <div class="text-center mb-auto p-tb20">
                        <a href="signup.html" class="saprate text-dark">Donâ€™t have an account?</a>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- Page Content End -->
    
    <!-- Footer -->
    <footer class="footer fixed">
        <div class="container">
            <a href="signup.html" class="btn btn-transparent btn-rounded d-block">CREATE AN ACCOUNT</a>
        </div>
    </footer>
    <!-- Footer End -->


    <!-- ------------------------------- LOADER -------------------------------- -->
    <div class="loader">
        
    </div>
    <!-- ------------------------------- LOADER -------------------------------- -->


    <!-- ------------------------------- MODAL -------------------------------- -->
    <div class="mymodal">
        
    </div>
    <!-- ------------------------------- MODAL -------------------------------- -->
    
  
</div>
<!--**********************************
    Scripts
***********************************-->
<script src="assets/js/jquery.js"></script>
<script src="assets/vendor/bootstrap/js/bootstrap.bundle.min.js"></script>
<script src="assets/js/settings.js"></script>
<script src="assets/js/custom.js"></script>
<script src="./assets/js/env.js"></script> 
<script src="./assets/js/onboarding.js"></script> 
<script src="assets/js/modal.js"></script>
<script>
    createpasswordPage();

    // CLICK SUBMIT PASSWORD BUTTON
    const createPassword =()=>{
        // alert("erf");
        let password = document.getElementById('password');
        let password2 = document.getElementById('confirmPassword');
        if(password.value !== password2.value) {
            $('.incorrectMsg').show();
            $('#confirmPassword').addClass('shake invalidPass')
            password2.blur(function() {
            // (triggers whenever the password field is unselected)
                $('#confirmPassword').trigger('reset');
                $('.incorrectMsg').hide();
                $('#confirmPassword').removeClass('shake').removeClass('invalidPass');
            });
        } else {
            $('#confirmPassword').trigger('reset');
            $('.incorrectMsg').hide();
            $('#confirmPassword').removeClass('shake').removeClass('invalidPass');

            var pswd = password.value;
            if(pswd.length >= 8 && pswd.match(/[a-z]/) && pswd.match(/[A-Z]/) && pswd.match(/\d/) && pswd.match(/[$&+,:;=?@#|'<>.^*()%!-]/) ) {
                // alert("Good to go");
                $('.incorrectMsg').hide();
                $('.incorrectMsg').html('Passwords do not match!');


                /********* DB CONNECTION **********/
                
                let registerData = localStorage.getItem('registerData');
                let otpemail = JSON.parse(registerData).email;

                startPageLoader();

                $.ajax({
                    "url": `${liveBaseUrl}/register`,
                    "method": "POST",
                    "timeout": 25000,
                    "headers": {
                        "Content-Type": "application/json"
                    },
                    "data": JSON.stringify({
                        "email": otpemail,
                        "first_name": JSON.parse(registerData).first_name,
                        "last_name": JSON.parse(registerData).last_name,
                        "password": pswd,
                        "phone": JSON.parse(registerData).phone,
                        "user_type": localStorage.getItem('userType')
                    }),
                    success: function(response) { 
                        EndPageLoader();
                        // console.log(response,"refre");
                        if(response.error == true){
                            // alert(response.message);
                            // alert("An error occured! Please ensure this account has not been registered before");
                            responsemodal("erroricon.png", "Error", "An error occured! Please ensure this account has not been registered before");
                        }else{
                            // alert(response.message);
                            responsemodal("successicon.png", "Success", "Registration Completed");   
                            // localStorage.setItem('authToken', response.token)
                            setTimeout(() => {
                                location.href="login.html";
                                // alert("Go to dashboard");
                            }, 2000); 
                        }
                    },
                    error: function(xmlhttprequest, textstatus, message) {
                        EndPageLoader();
                        if(textstatus==="timeout") {
                            basicmodal("", "Service timed out");
                        } else {
                            // alert(textstatus);
                            basicmodal("", textstatus);
                        }
                    }
                })
                /********* DB CONNECTION **********/

            }else{
                $('.incorrectMsg').show();
                $('.incorrectMsg').html('Invalid password');
            }
        } 
    }
    // CLICK SUBMIT PASSWORD BUTTON

</script>
</body>
</html>